# Extra shell function and environment setup for python
function mkpyvenv() {
  virtualenv venv
  
  # Installing libraries if requirements.txt is present.
  source ./venv/bin/activate
  if [ -f requirements.txt ]; then 
	pip install -r requirements.txt
  fi
  deactivate
  
  # Setting up direnv file
  echo "source ./venv/bin/activate" > .envrc
  direnv allow .
  cd ..
  cd -
}

function mkpyreq() {
	pip freeze > requirements.txt
}

# conda initializational
if [ -n "$BASH_VERSION" ]; then
__conda_setup="$('$HOME/.miniconda3/bin/conda' 'shell.bash' 'hook' 2> /dev/null)"
elif [ -n "$ZSH_VERSION" ]; then
__conda_setup="$('$HOME/.miniconda3/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
fi
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "$HOME/.miniconda3/etc/profile.d/conda.sh" ]; then
        . "$HOME/.miniconda3/etc/profile.d/conda.sh"
    else
        export PATH="$HOME/.miniconda3/bin:$PATH"
    fi
fi
unset __conda_setup

# Activate conda by default: I need python environment to start on its own.
if which conda >/dev/null; then
	conda activate
fi

# I do not want any python package saving their data directly in $HOME
# Additional setting for jupyter.
export JUPYTER_CONFIG_DIR="$HOME/.config/jupyter"
export IPYTHONDIR="$HOME/.local/share/ipython"

# Additional setting for cookie cutter.
export COOKIECUTTER_CONFIG="$HOME/.config/cookiecutter/cookiecutterrc.secret"
