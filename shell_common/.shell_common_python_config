# Extra shell function and environment setup for python
function mkpyvenv() {
  virtualenv venv

  # Installing libraries if requirements.txt is present.
  source ./venv/bin/activate
  if [ -f requirements.txt ]; then 
	pip install -r requirements.txt
  fi
  deactivate

  # Setting up direnv file
  echo "source ./venv/bin/activate" > .envrc
  direnv allow .
  cd ..
  cd -
}

function mkpyreq() {
	pip freeze > requirements.txt
}

# Some alias
alias ca='conda activate'
alias ce='conda deactivate'
alias ipy='ipython'
alias jl='jupyter lab'

# I do not want any python package saving their data directly in $HOME
# Additional setting for jupyter.
export JUPYTER_CONFIG_DIR="$HOME/.config/jupyter"
export IPYTHONDIR="$HOME/.local/share/ipython"

# Additional setting for cookie cutter.
export COOKIECUTTER_CONFIG="$HOME/.config/cookiecutter/cookiecutterrc.secret"

# Intialize pyenv if present
export PYENV_ROOT="$HOME/.pyenv"
[ -d "${PYENV_ROOT/bin}" ] && export PATH="$PYENV_ROOT/bin:$PATH"
if which pyenv > /dev/null; then eval "$(pyenv init -)"; fi
if which pyenv-virtualenv-init > /dev/null; then eval "$(pyenv virtualenv-init -)"; fi

# conda initialization
#if [ -n "$BASH_VERSION" ]; then
#__conda_setup="$('$HOME/.miniconda3/bin/conda' 'shell.bash' 'hook' 2> /dev/null)"
#elif [ -n "$ZSH_VERSION" ]; then
#__conda_setup="$('$HOME/.miniconda3/bin/conda' 'shell.zsh' 'hook' 2> /dev/null)"
#fi
#if [ $? -eq 0 ]; then
#    eval "$__conda_setup"
#else
#    if [ -f "$HOME/.miniconda3/etc/profile.d/conda.sh" ]; then
#        . "$HOME/.miniconda3/etc/profile.d/conda.sh"
#    else
#        export PATH="$HOME/.miniconda3/bin:$PATH"
#    fi
#fi
#unset __conda_setup

# Do not activate conda by default (Speed Optimization)
#if which conda >/dev/null; then
#    conda activate
#fi
